<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>GeNN: Tutorial 2</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<!--This is Google Analytics Tracking Code-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-57354659-1', 'auto');
  ga('send', 'pageview');
</script>
<!--End of Google Analytics Tracking Code-->
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="html_styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em; padding-bottom: 0.5em;" id="projectlogo"><img alt="Logo" src="GeNN-logo-55px.gif"/></td>
  <td style="padding-left: 3.5em; padding-bottom: 0.5em;">
   <div id="projectname">GeNN
   &#160;<span id="projectnumber">3.1.0</span>
   </div>
   <div id="projectbrief">GPU enhanced Neuronal Networks (GeNN)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('Tutorial2.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Tutorial 2 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In this tutorial we will learn to add synapsePopulations to connect neurons in neuron groups to each other with synatic models. As an example we will connect the ten Hodgkin-Huxley neurons from tutorial 1 in a ring of excitatory synapses.</p>
<p>First, copy the files from Tutorial 1 into a new directory and rename the <code>tenHHModel.cc</code> to <code>tenHHRingModel.cc</code> and <code>tenHHSimulation.cc</code> to <code>tenHHRingSimulation.cc</code>, e.g. on Linux or Mac: </p><div class="fragment"><div class="line">&gt;&gt; cp -r tenHH_project tenHHRing_project</div><div class="line">&gt;&gt; cd tenHHRing_project</div><div class="line">&gt;&gt; mv tenHHModel.cc tenHHRingModel.cc</div><div class="line">&gt;&gt; mv tenHHSimulation.cc tenHHRingSimulation.cc</div></div><!-- fragment --><p> Now, we need to add a synapse group to the model that allows to connect neurons from the Pop1 group to connect to other neurons of this group. Open <code>tenHHRingModel.cc</code>, change the model name inside, </p><div class="fragment"><div class="line">model.<a class="code" href="dc/de5/classNNmodel.html#aba858ed73e029de0366ab23f973b1273">setName</a>(<span class="stringliteral">&quot;tenHHRing&quot;</span>);</div></div><!-- fragment --><h1><a class="anchor" id="addSynapse"></a>
Adding Synaptic connections</h1>
<p>Now we need additional initial values and parameters for the synapse and post-synaptic models. We will use the standard <a class="el" href="d9/d74/classWeightUpdateModels_1_1StaticPulse.html" title="Pulse-coupled, static synapse. ">WeightUpdateModels::StaticPulse</a> weight update model and <a class="el" href="d5/d27/classPostsynapticModels_1_1ExpCond.html" title="Exponential decay with synaptic input treated as a conductance value. ">PostsynapticModels::ExpCond</a> post-synaptic model. They need the following initial variables and parameters: </p><div class="fragment"><div class="line"><a class="code" href="d6/d53/classNewModels_1_1VarInitContainerBase.html">WeightUpdateModels::StaticPulse::VarValues</a> s_ini(</div><div class="line">    0.0 <span class="comment">// 0 - g: the synaptic conductance value</span></div><div class="line">);</div><div class="line"></div><div class="line"><a class="code" href="da/d76/classSnippet_1_1ValueBase.html">PostsynapticModels::ExpCond::ParamValues</a> ps_p(</div><div class="line">    1.0,      <span class="comment">// 0 - tau_S: decay time constant for S [ms]</span></div><div class="line">    -80.0     <span class="comment">// 1 - Erev: Reversal potential</span></div><div class="line">);</div></div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>the <a class="el" href="d9/d74/classWeightUpdateModels_1_1StaticPulse.html" title="Pulse-coupled, static synapse. ">WeightUpdateModels::StaticPulse</a> weight update model has no parameters and the <a class="el" href="d5/d27/classPostsynapticModels_1_1ExpCond.html" title="Exponential decay with synaptic input treated as a conductance value. ">PostsynapticModels::ExpCond</a> post-synaptic model has no state variables.</dd></dl>
<p>We can then add a synapse population at the end of the <code>modelDefinition(...)</code> function, </p><div class="fragment"><div class="line">model.<a class="code" href="dc/de5/classNNmodel.html#aae817535d08ab6b35ef1e2348b03a37c">addSynapsePopulation</a>&lt;<a class="code" href="d9/d74/classWeightUpdateModels_1_1StaticPulse.html">WeightUpdateModels::StaticPulse</a>, <a class="code" href="d5/d27/classPostsynapticModels_1_1ExpCond.html">PostsynapticModels::ExpCond</a>&gt;(</div><div class="line">    <span class="stringliteral">&quot;Pop1self&quot;</span>, <a class="code" href="dd/dd5/synapseMatrixType_8h.html#a24a045033b9a7e987843a67ff5ddec9cac125fea63eb10ca9b8951ddbe787d7ce">SynapseMatrixType::DENSE_INDIVIDUALG</a>, 10,</div><div class="line">    <span class="stringliteral">&quot;Pop1&quot;</span>, <span class="stringliteral">&quot;Pop1&quot;</span>,</div><div class="line">    {}, s_ini,</div><div class="line">    ps_p, {});</div></div><!-- fragment --><p> The addSynapsePopulation parameters are </p><ul>
<li>WeightUpdateModel: template parameter specifying the type of weight update model (derived from <a class="el" href="d2/d05/classWeightUpdateModels_1_1Base.html" title="Base class for all weight update models. ">WeightUpdateModels::Base</a>). </li>
<li>PostsynapticModel: template parameter specifying the type of postsynaptic model (derived from <a class="el" href="d1/d3a/classPostsynapticModels_1_1Base.html" title="Base class for all postsynaptic models. ">PostsynapticModels::Base</a>). </li>
<li>name string containing unique name of synapse population. </li>
<li>mtype how the synaptic matrix associated with this synapse population should be represented. Here <a class="el" href="dd/dd5/synapseMatrixType_8h.html#a24a045033b9a7e987843a67ff5ddec9cac125fea63eb10ca9b8951ddbe787d7ce">SynapseMatrixType::DENSE_INDIVIDUALG</a> means that there will be a dense connectivity matrix with seperate values for each entry. </li>
<li>delayStep integer specifying number of timesteps of propagation delay that spikes travelling through this synapses population should incur (or NO_DELAY for none) </li>
<li>src string specifying name of presynaptic (source) population </li>
<li>trg string specifying name of postsynaptic (target) population </li>
<li>weightParamValues parameters for weight update model wrapped in WeightUpdateModel::ParamValues object. </li>
<li>weightVarInitialisers initial values or initialisation snippets for the weight update model's state variables wrapped in a WeightUpdateModel::VarValues object. </li>
<li>postsynapticParamValues parameters for postsynaptic model wrapped in PostsynapticModel::ParamValues object. </li>
<li>postsynapticVarInitialisers initial values or initialisation snippets for the postsynaptic model wrapped in PostsynapticModel::VarValues object.</li>
</ul>
<p>Adding the addSynapsePopulation command to the model definition informs GeNN that there will be synapses between the named neuron populations, here between population <code>Pop1</code> and itself. In the case of <a class="el" href="dd/dd5/synapseMatrixType_8h.html#a24a045033b9a7e987843a67ff5ddec9cac125fea63eb10ca9b8951ddbe787d7ce">SynapseMatrixType::DENSE_INDIVIDUALG</a> connectivity, where individual connections are present is determined by the weight update model's <code>g</code> variable which will need to be initialised in our user code. As always, the <code>modelDefinition</code> function ends on </p><div class="fragment"><div class="line">model.<a class="code" href="dc/de5/classNNmodel.html#aaee7f16c9627dddb2588bad24afe5d15">finalize</a>();</div></div><!-- fragment --><p> At this point our model definition file <code>tenHHRingModel.cc</code> should look like this </p><div class="fragment"><div class="line"><span class="comment">// Model definition file tenHHRing.cc</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="dc/de1/modelSpec_8h.html">modelSpec.h</a>&quot;</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> modelDefinition(<a class="code" href="dc/de5/classNNmodel.html">NNmodel</a> &amp;model)</div><div class="line">{</div><div class="line">    <span class="comment">// Settings</span></div><div class="line">    <a class="code" href="d8/d27/namespaceGENN__PREFERENCES.html#a1f2baab3bda8720e90ef46685f2a6559">GENN_PREFERENCES::defaultVarMode</a> = <a class="code" href="d6/d8f/variableMode_8h.html#a21a79f2184074500f38877a503a4716da148e2b322b52579603075a629c3944a4">VarMode::LOC_HOST_DEVICE_INIT_DEVICE</a>;</div><div class="line"></div><div class="line">    <span class="comment">// definition of tenHHRing</span></div><div class="line">    <a class="code" href="dc/de1/modelSpec_8h.html#a62ce532f6f7e535adfb9fe151a1c0c6b">initGeNN</a>();</div><div class="line">    model.<a class="code" href="dc/de5/classNNmodel.html#aa8283ad87bc9d6caa854d21ca4f9b249">setDT</a>(0.1);</div><div class="line">    model.<a class="code" href="dc/de5/classNNmodel.html#aba858ed73e029de0366ab23f973b1273">setName</a>(<span class="stringliteral">&quot;tenHHRing&quot;</span>);</div><div class="line"></div><div class="line">    <a class="code" href="da/d76/classSnippet_1_1ValueBase.html">NeuronModels::TraubMiles::ParamValues</a> p(</div><div class="line">        7.15,       <span class="comment">// 0 - gNa: Na conductance in muS</span></div><div class="line">        50.0,       <span class="comment">// 1 - ENa: Na equi potential in mV</span></div><div class="line">        1.43,       <span class="comment">// 2 - gK: K conductance in muS</span></div><div class="line">        -95.0,      <span class="comment">// 3 - EK: K equi potential in mV</span></div><div class="line">        0.02672,    <span class="comment">// 4 - gl: leak conductance in muS</span></div><div class="line">        -63.563,    <span class="comment">// 5 - El: leak equi potential in mV</span></div><div class="line">        0.143       <span class="comment">// 6 - Cmem: membr. capacity density in nF</span></div><div class="line">    );</div><div class="line"></div><div class="line">    <a class="code" href="d6/d53/classNewModels_1_1VarInitContainerBase.html">NeuronModels::TraubMiles::VarValues</a> ini(</div><div class="line">        -60.0,         <span class="comment">// 0 - membrane potential V</span></div><div class="line">        0.0529324,     <span class="comment">// 1 - prob. for Na channel activation m</span></div><div class="line">        0.3176767,     <span class="comment">// 2 - prob. for not Na channel blocking h</span></div><div class="line">        0.5961207      <span class="comment">// 3 - prob. for K channel activation n</span></div><div class="line">    );</div><div class="line">    model.<a class="code" href="dc/de5/classNNmodel.html#a8d7d593837882775dfb89a9780c06fab">addNeuronPopulation</a>&lt;<a class="code" href="d2/dc3/classNeuronModels_1_1TraubMiles.html">NeuronModels::TraubMiles</a>&gt;(<span class="stringliteral">&quot;Pop1&quot;</span>, 10, p, ini);</div><div class="line"></div><div class="line">    <a class="code" href="d6/d53/classNewModels_1_1VarInitContainerBase.html">WeightUpdateModels::StaticPulse::VarValues</a> s_ini(</div><div class="line">        0.0 <span class="comment">// 0 - g: the synaptic conductance value</span></div><div class="line">    );</div><div class="line"></div><div class="line">    <a class="code" href="da/d76/classSnippet_1_1ValueBase.html">PostsynapticModels::ExpCond::ParamValues</a> ps_p(</div><div class="line">    1.0,    <span class="comment">// 0 - tau_S: decay time constant for S [ms]</span></div><div class="line">    -80.0   <span class="comment">// 1 - Erev: Reversal potential</span></div><div class="line">    );</div><div class="line"></div><div class="line">    model.<a class="code" href="dc/de5/classNNmodel.html#aae817535d08ab6b35ef1e2348b03a37c">addSynapsePopulation</a>&lt;<a class="code" href="d9/d74/classWeightUpdateModels_1_1StaticPulse.html">WeightUpdateModels::StaticPulse</a>, PostsynapticModels::ExpCond&gt;(</div><div class="line">        <span class="stringliteral">&quot;Pop1self&quot;</span>, <a class="code" href="dd/dd5/synapseMatrixType_8h.html#a24a045033b9a7e987843a67ff5ddec9cac125fea63eb10ca9b8951ddbe787d7ce">SynapseMatrixType::DENSE_INDIVIDUALG</a>, <a class="code" href="dc/de1/modelSpec_8h.html#a291aa33d0e485ee09a6881cf8056e13c">NO_DELAY</a>,</div><div class="line">        <span class="stringliteral">&quot;Pop1&quot;</span>, <span class="stringliteral">&quot;Pop1&quot;</span>,</div><div class="line">        {}, s_ini,</div><div class="line">        ps_p, {});</div><div class="line">        model.<a class="code" href="dc/de5/classNNmodel.html#aaee7f16c9627dddb2588bad24afe5d15">finalize</a>();</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="SynapseMatrix"></a>
Defining the Detailed Synaptic Connections</h1>
<p>Open the <code>tenHHRingSimulation.cc</code> file and update the file names of includes: </p><div class="fragment"><div class="line"><span class="comment">// tenHHRingModel simulation code</span></div><div class="line"><span class="preprocessor">#include &quot;tenHHRingModel_CODE/definitions.h&quot;</span></div></div><!-- fragment --><p> Because, after memory allocation and initialization, <code>gPop1self</code> will contain only zeros (as specified by <code>s_ini</code>), we generate the desired ring connectivity by assigning a non-zero conductivity of -0.2 <img class="formulaInl" alt="$\mu$" src="form_10.png"/>S to all synapses from neuron <code>i</code> to <code>i+1</code> (and <code>9</code> to <code>0</code> to close the ring). </p><div class="fragment"><div class="line">allocateMem();</div><div class="line">initialize();</div><div class="line"><span class="comment">// define the connectivity</span></div><div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i= 0; i &lt; 10; i++) {</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> pre= i;</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> post= (i+1)%10;</div><div class="line">    gPop1self[pre*10+post]= -0.2;</div><div class="line">}</div><div class="line"><span class="preprocessor">#ifndef CPU_ONLY</span></div><div class="line">pushPop1selfStateToDevice();</div><div class="line"><span class="preprocessor">#endif</span></div></div><!-- fragment --><p>We can now build our new model: </p><div class="fragment"><div class="line">&gt;&gt; genn-buildmodel.sh tenHHRingModel.cc</div></div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>Again, if you don't have an NVIDIA GPU and are running GeNN in CPU_ONLY mode, you can instead build with the <code>-c</code> option as described in <a class="el" href="Tutorial1.html">Tutorial 1</a>.</dd></dl>
<p>and, after adjusting the GNUmakefile or MSBuild script to point to <code>tenHHRingSimulation.cc</code> rather than <code>tenHHSimulation.cc</code>, we can build and run our new simulator in the same way described in <a class="el" href="Tutorial1.html">Tutorial 1</a>. However if we plot the content of columns one against the subsequent 10 columns of <code>tenHHexample.V.dat</code> it looks very similar as in <a class="el" href="Tutorial1.html">Tutorial 1</a> </p><div class="image">
<img src="tenHHRingexample1.png" alt="tenHHRingexample1.png"/>
</div>
 <p>This is because none of the neurons are spiking so there are no spikes to propagate around the ring.</p>
<h1><a class="anchor" id="initialConditions"></a>
Providing initial stimuli</h1>
<p>We can use a <a class="el" href="d5/d1f/classNeuronModels_1_1SpikeSource.html" title="Empty neuron which allows setting spikes from external sources. ">NeuronModels::SpikeSource</a> to inject an initial spike during the first timestep to start spikes propagating around the ring. Firstly we need to add it to the network by adding the following to the end of the <code>modelDefinition(...)</code> function: </p><div class="fragment"><div class="line">model.<a class="code" href="dc/de5/classNNmodel.html#a8d7d593837882775dfb89a9780c06fab">addNeuronPopulation</a>&lt;<a class="code" href="d5/d1f/classNeuronModels_1_1SpikeSource.html">NeuronModels::SpikeSource</a>&gt;(<span class="stringliteral">&quot;Stim&quot;</span>, 1, {}, {});</div><div class="line">model.<a class="code" href="dc/de5/classNNmodel.html#aae817535d08ab6b35ef1e2348b03a37c">addSynapsePopulation</a>&lt;<a class="code" href="d9/d74/classWeightUpdateModels_1_1StaticPulse.html">WeightUpdateModels::StaticPulse</a>, PostsynapticModels::ExpCond&gt;(</div><div class="line">    <span class="stringliteral">&quot;StimPop1&quot;</span>, <a class="code" href="dd/dd5/synapseMatrixType_8h.html#a24a045033b9a7e987843a67ff5ddec9cac125fea63eb10ca9b8951ddbe787d7ce">SynapseMatrixType::DENSE_INDIVIDUALG</a>, <a class="code" href="dc/de1/modelSpec_8h.html#a291aa33d0e485ee09a6881cf8056e13c">NO_DELAY</a>,</div><div class="line">    <span class="stringliteral">&quot;Stim&quot;</span>, <span class="stringliteral">&quot;Pop1&quot;</span>,</div><div class="line">    {}, s_ini,</div><div class="line">    ps_p, {});</div></div><!-- fragment --><p> we can then initialise this connection's connectivity matrix in <code>tenHHRingSimulation.cc</code> file </p><dl class="section note"><dt>Note</dt><dd>all other synapses will be initialised to zero because the synapse population used the previously-defined <code>s_ini</code> weight update initial values.</dd></dl>
<div class="fragment"><div class="line"><span class="comment">// define stimuli connectivity</span></div><div class="line">gStimPop1[0]= -0.2;</div><div class="line"><span class="preprocessor">#ifndef CPU_ONLY</span></div><div class="line">pushStimPop1StateToDevice();</div><div class="line"><span class="preprocessor">#endif</span></div></div><!-- fragment --><p> and finally inject a spike in the first timestep </p><div class="fragment"><div class="line"><span class="keywordflow">if</span>(i == 0) {</div><div class="line">    spikeCount_Stim = 1;</div><div class="line">    spike_Stim[0] = 0;</div><div class="line"><span class="preprocessor">#ifndef CPU_ONLY</span></div><div class="line">    pushStimSpikesToDevice();</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"><span class="preprocessor">}</span></div></div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd><code>spike_Stim[n]</code> is used to specify the indices of the neurons in population <code>Stim</code> spikes which should emit spikes where <img class="formulaInl" alt="$n \in [0, \mbox{spikeCount\_Stim} )$" src="form_36.png"/>.</dd></dl>
<p>At this point our user code <code>tenHHRingSimulation.cc</code> should look like this </p><div class="fragment"><div class="line"><span class="comment">// tenHHRing simulation code</span></div><div class="line"><span class="preprocessor">#include &quot;tenHHRing_CODE/definitions.h&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;fstream&gt;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> <a class="code" href="df/d10/generateALL_8cc.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>()</div><div class="line">{</div><div class="line">    allocateMem();</div><div class="line">    initialize();</div><div class="line"></div><div class="line">    <span class="comment">// define the connectivity</span></div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i= 0; i &lt; 10; i++) {</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">int</span> pre= i;</div><div class="line">        <span class="keyword">const</span> <span class="keywordtype">int</span> post= (i+1)%10;</div><div class="line">        gPop1self[pre*10+post]= -0.2;</div><div class="line">    }</div><div class="line"><span class="preprocessor">#ifndef CPU_ONLY</span></div><div class="line">    pushPop1selfStateToDevice();</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">    <span class="comment">// define stimuli connectivity</span></div><div class="line">    gStimPop1[0]= -0.2;</div><div class="line"><span class="preprocessor">#ifndef CPU_ONLY</span></div><div class="line">    pushStimPop1StateToDevice();</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">    ofstream os(<span class="stringliteral">&quot;tenHHRing_output.V.dat&quot;</span>);</div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i= 0; i &lt; 10000; i++) {</div><div class="line">        <span class="keywordflow">if</span>(i == 0) {</div><div class="line">            spikeCount_Stim = 1;</div><div class="line">            spike_Stim[0] = 0;</div><div class="line"><span class="preprocessor">#ifndef CPU_ONLY</span></div><div class="line">            pushStimSpikesToDevice();</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">        }</div><div class="line"><span class="preprocessor">#ifdef CPU_ONLY</span></div><div class="line">        stepTimeCPU();</div><div class="line"><span class="preprocessor">#else</span></div><div class="line">        stepTimeGPU();</div><div class="line">        </div><div class="line">        pullPop1StateFromDevice();</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">        os &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j= 0; j &lt; 10; j++) {</div><div class="line">            os &lt;&lt; VPop1[j] &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line">        }</div><div class="line">        s &lt;&lt; endl;</div><div class="line">    }</div><div class="line">    os.close();</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p> Finally if we build, make and run this model; and plot the first 200 ms of the ten neurons' membrane voltages - they now looks like this: </p><div class="image">
<img src="tenHHRingexample2.png" alt="tenHHRingexample2.png"/>
</div>
 <p><a class="el" href="Tutorial1.html">Previous</a> | <a class="el" href="Tutorial2.html">Top</a> | <a class="el" href="UserGuide.html">Next</a> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Feb 14 2018 12:09:03 for GeNN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
