<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>GeNN: Quickstart</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<!--This is Google Analytics Tracking Code-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-57354659-1', 'auto');
  ga('send', 'pageview');
</script>
<!--End of Google Analytics Tracking Code-->
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="../../html_styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em; padding-bottom: 0.5em;" id="projectlogo"><img alt="Logo" src="../../GeNN-logo-55px.gif"/></td>
  <td style="padding-left: 3.5em; padding-bottom: 0.5em;">
   <div id="projectname">GeNN
   &#160;<span id="projectnumber">3.3.0</span>
   </div>
   <div id="projectbrief">GPU enhanced Neuronal Networks (GeNN)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d7/d98/Quickstart.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Quickstart </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>GeNN is based on the idea of code generation for the involved GPU or CPU simulation code for neuronal network models but leaves a lot of freedom how to use the generated code in the final application. To facilitate the use of GeNN on the background of this philosophy, it comes with a number of complete examples containing both the model description code that is used by GeNN for code generation and the "user side code" to run the generated model and safe the results. Running these complete examples should be achievable in a few minutes. The necessary steps are described below.</p>
<h1><a class="anchor" id="unix_quick"></a>
Running an Example Model in Unix</h1>
<p>In order to get a quick start and run a provided model, open a shell and navigate to the <code>userproject/tools</code> directory: </p><div class="fragment"><div class="line">cd $GENN_PATH/userproject/tools</div></div><!-- fragment --><p> Then compile the additional tools for creating and running example projects: </p><div class="fragment"><div class="line">make</div></div><!-- fragment --><p> Some of the example models such as the <a class="el" href="../../d9/d61/Examples.html#ex_mbody">Insect olfaction model</a> use an <code>generate_run</code> executable which automates the building and simulation of the model. To build this executable for the <a class="el" href="../../d9/d61/Examples.html#ex_mbody">Insect olfaction model</a> example, navigate to the <code>userproject/MBody1_project</code> directory: </p><div class="fragment"><div class="line">cd ../MBody1_project</div></div><!-- fragment --><p> Then type </p><div class="fragment"><div class="line">make</div></div><!-- fragment --><p> to generate an executable that you can invoke with </p><div class="fragment"><div class="line">./generate_run 1 100 1000 20 100 0.0025 test1 MBody1</div></div><!-- fragment --><p> or, if you don't have an NVIDIA GPU and are running GeNN in CPU_ONLY mode, you can instead invoke this executable with </p><div class="fragment"><div class="line">./generate_run 0 100 1000 20 100 0.0025 test1 MBody1 CPU_ONLY=1</div></div><!-- fragment --><p> both invocations will build and simulate a model of the locust olfactory system with 100 projection neurons, 1000 Kenyon cells, 20 lateral horn interneurons and 100 output neurons in the mushroom body lobes. </p><dl class="section note"><dt>Note</dt><dd>If the model isn't build in CPU_ONLY mode it will be simulated on an automatically chosen GPU.</dd></dl>
<p>The generate_run tool generates connectivity matrices for the model <code>MBody1</code> and writes them to file, compiles and runs the model using these files as inputs and finally output the resulting spiking activity. For more information of the options passed to this command see the <a class="el" href="../../d9/d61/Examples.html#ex_mbody">Insect olfaction model</a> section.</p>
<p>The MBody1 example is already a highly integrated example that showcases many of the features of GeNN and how to program the user-side code for a GeNN application. More details in the <a class="el" href="../../dc/d05/UserManual.html">User Manual </a>.</p>
<h1><a class="anchor" id="windows_quick"></a>
Running an Example Model in Windows</h1>
<p>All interaction with GeNN programs are command-line based and hence are executed within a <code>cmd</code> window. Open a Visual Studio <code>cmd</code> window via Start: All Programs: Visual Studio: Tools: Native Tools Command Prompt, and navigate to the <code>userproject\tools</code> directory. </p><div class="fragment"><div class="line">cd %GENN_PATH%\userproject\tools</div></div><!-- fragment --><p> Then compile the additional tools for creating and running example projects: </p><div class="fragment"><div class="line">nmake /f WINmakefile</div></div><!-- fragment --><p> Some of the example models such as the <a class="el" href="../../d9/d61/Examples.html#ex_mbody">Insect olfaction model</a> use an <code>generate_run</code> executable which automates the building and simulation of the model. To build this executable for the <a class="el" href="../../d9/d61/Examples.html#ex_mbody">Insect olfaction model</a> example, navigate to the <code>userproject\MBody1_project</code> directory: </p><div class="fragment"><div class="line">cd ..\MBody1_project</div></div><!-- fragment --><p> Then type </p><div class="fragment"><div class="line">nmake /f WINmakefile</div></div><!-- fragment --><p> to generate an executable that you can invoke with </p><div class="fragment"><div class="line">generate_run 1 100 1000 20 100 0.0025 test1 MBody1</div></div><!-- fragment --><p> or, if you don't have an NVIDIA GPU and are running GeNN in CPU_ONLY mode, you can instead invoke this executable with </p><div class="fragment"><div class="line">generate_run 0 100 1000 20 100 0.0025 test1 MBody1 CPU_ONLY=1</div></div><!-- fragment --><p> both invocations will build and simulate a model of the locust olfactory system with 100 projection neurons, 1000 Kenyon cells, 20 lateral horn interneurons and 100 output neurons in the mushroom body lobes. </p><dl class="section note"><dt>Note</dt><dd>If the model isn't build in CPU_ONLY mode it will be simulated on an automatically chosen GPU.</dd></dl>
<p>The generate_run tool generates connectivity matrices for the model <code>MBody1</code> and writes them to file, compiles and runs the model using these files as inputs and finally output the resulting spiking activity. For more information of the options passed to this command see the <a class="el" href="../../d9/d61/Examples.html#ex_mbody">Insect olfaction model</a> section.</p>
<p>The MBody1 example is already a highly integrated example that showcases many of the features of GeNN and how to program the user-side code for a GeNN application. More details in the <a class="el" href="../../dc/d05/UserManual.html">User Manual </a>.</p>
<h1><a class="anchor" id="how_to"></a>
How to use GeNN for New Projects</h1>
<p>Creating and running projects in GeNN involves a few steps ranging from defining the fundamentals of the model, inputs to the model, details of the model like specific connectivity matrices or initial values, running the model, and analyzing or saving the data.</p>
<p>GeNN code is generally created by passing the C++ model file (see <a class="el" href="../../d7/d98/Quickstart.html#ownmodel">below</a>) directly to the genn-buildmodel script. Another way to use GeNN is to create or modify a script or executable such as <code>userproject/MBody1_project/generate_run.cc</code> that wraps around the other programs that are used for each of the steps listed above. In more detail, the GeNN workflow consists of:</p>
<ol type="1">
<li>Either use external programs to generate connectivity and input files to be loaded into the user side code at runtime or generate these matrices directly inside the user side code.</li>
<li>Generating the model simulation code using <code>genn-buildmodel.sh</code> (On Linux or Mac) or <code>genn-buildmodel.bat</code> (on Windows). For example, inside the <code>generate_run</code> engine used by the MBody1_project, the following command is executed on Linux: <div class="fragment"><div class="line">genn-buildmodel.sh MBody1.cc</div></div><!-- fragment --> or, if you don't have an NVIDIA GPU and are running GeNN in CPU_ONLY mode, the following command is executed: <div class="fragment"><div class="line">genn-buildmodel.sh -c MBody1.cc</div></div><!-- fragment --> The <code>genn-buildmodel</code> script compiles the GeNN code generator in conjunction with the user-provided model description <code>model/MBody1.cc</code>. It then executes the GeNN code generator to generate the complete model simulation code for the model.</li>
<li>Provide a build script to compile the generated model simulation and the user side code into a simulator executable (in the case of the MBody1 example this consists of two files <code>classol_sim.cc</code> and <code>map_classol.cc</code>). On Linux or Mac this typically consists of a GNU makefile: <div class="fragment"><div class="line">EXECUTABLE      := classol_sim</div><div class="line">SOURCES         := classol_sim.cc map_classol.cc</div><div class="line">include $(GENN_PATH)/userproject/include/makefile_common_gnu.mk</div></div><!-- fragment --> And on Windows an MSBuild script: <div class="fragment"><div class="line">&lt;?xml <a class="code" href="../../dd/dc4/namespacesetup.html#a2aa722b36a933088812b50ea79b97a5c">version</a>=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;utf-8&quot;</span>?&gt;</div><div class="line">&lt;Project DefaultTargets=<span class="stringliteral">&quot;Build&quot;</span>  xmlns=<span class="stringliteral">&quot;http://schemas.microsoft.com/developer/msbuild/2003&quot;</span>&gt;</div><div class="line">&lt;Import Project=<span class="stringliteral">&quot;MBody1_CODE\generated_code.props&quot;</span> /&gt;    </div><div class="line">&lt;ItemGroup&gt;</div><div class="line">    &lt;ClCompile Include=<span class="stringliteral">&quot;classol_sim.cc&quot;</span> /&gt;</div><div class="line">    &lt;ClCompile Include=<span class="stringliteral">&quot;map_classol.cc&quot;</span> /&gt;</div><div class="line">&lt;/ItemGroup&gt;</div><div class="line">&lt;/Project&gt;</div></div><!-- fragment --></li>
<li>Compile the simulator executable by invoking GNU make on Linux or Mac: <div class="fragment"><div class="line">make clean all</div></div><!-- fragment --> or MSbuild on Windows: <div class="fragment"><div class="line">msbuild MBody1.vcxproj /p:Configuration=Release</div></div><!-- fragment --> If you don't have an NVIDIA GPU and are running GeNN in CPU_ONLY mode, you should compile the simulator by passing the following options to GNU make on Linux or Mac: <div class="fragment"><div class="line">make clean all CPU_ONLY=1</div></div><!-- fragment --> or, on Windows, by selecting a CPU_ONLY MSBuild configuration: <div class="fragment"><div class="line">msbuild MBody1.vcxproj /p:Configuration=Release_CPU_ONLY</div></div><!-- fragment --></li>
<li>Finally, run the resulting stand-alone simulator executable. In the MBody1 example, this is called <code>classol_sim</code> on Linux and <code>MBody1.exe</code> on Windows.</li>
</ol>
<h1><a class="anchor" id="ownmodel"></a>
Defining a New Model in GeNN</h1>
<p>According to the work flow outlined above, there are several steps to be completed to define a neuronal network model.</p>
<ol type="1">
<li>The neuronal network of interest is defined in a model definition file, e.g. <code>Example1.cc</code>.</li>
<li><p class="startli">Within the the model definition file <code>Example1.cc</code>, the following tasks need to be completed:</p>
<p class="startli">a) The GeNN file <code><a class="el" href="../../dc/de1/modelSpec_8h.html" title="Header file that contains the class (struct) definition of neuronModel for defining a neuron model an...">modelSpec.h</a></code> needs to be included, </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../dc/de1/modelSpec_8h.html">modelSpec.h</a>&quot;</span></div></div><!-- fragment --><p class="startli">b) The values for initial variables and parameters for neuron and synapse populations need to be defined, e.g. </p><div class="fragment"><div class="line"><a class="code" href="../../da/d76/classSnippet_1_1ValueBase.html">NeuronModels::PoissonNew::ParamValues</a> poissonParams(</div><div class="line">  10.0);      <span class="comment">// 0 - firing rate</span></div></div><!-- fragment --><p> would define the (homogeneous) parameters for a population of Poisson neurons. </p><dl class="section note"><dt>Note</dt><dd>The number of required parameters and their meaning is defined by the neuron or synapse type. Refer to the <a class="el" href="../../dc/d05/UserManual.html">User Manual </a> for details. We recommend, however, to use comments like in the above example to achieve maximal clarity of each parameter's meaning.</dd></dl>
<p>If heterogeneous parameter values are required for a particular population of neurons (or synapses), they need to be defined as "variables" rather than parameters. See the <a class="el" href="../../dc/d05/UserManual.html">User Manual </a> for how to define new neuron (or synapse) types and the <a class="el" href="../../d4/dc6/sectVariableInitialisation.html#sect_new_var_init">Defining a new variable initialisation snippet</a> section for more information on initialising these variables to hetererogenous values.</p>
<p class="startli">c) The actual network needs to be defined in the form of a function <code>modelDefinition</code>, i.e. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> modelDefinition(<a class="code" href="../../dc/de5/classNNmodel.html">NNmodel</a> &amp;model); </div></div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>The name <code>modelDefinition</code> and its parameter of type <code><a class="el" href="../../dc/de5/classNNmodel.html">NNmodel</a>&amp;</code> are fixed and cannot be changed if GeNN is to recognize it as a model definition.</dd></dl>
<p>d) Inside modelDefinition(), The time step <code>DT</code> needs to be defined, e.g. </p><div class="fragment"><div class="line">model.setDT(0.1);</div></div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>All provided examples and pre-defined model elements in GeNN work with units of mV, ms, nF and muS. However, the choice of units is entirely left to the user if custom model elements are used.</dd></dl>
<p><code>MBody1.cc</code> shows a typical example of a model definition function. In its core it contains calls to <a class="el" href="../../dc/de5/classNNmodel.html#ace4f728c03858ad86dd4d05c7f9a0b9b" title="Method for adding a neuron population to a neuronal network model, using C++ string for the name of t...">NNmodel::addNeuronPopulation</a> and <a class="el" href="../../dc/de5/classNNmodel.html#aae817535d08ab6b35ef1e2348b03a37c" title="This function has been depreciated as of GeNN 2.2. ">NNmodel::addSynapsePopulation</a> to build up the network. For a full range of options for defining a network, refer to the <a class="el" href="../../dc/d05/UserManual.html">User Manual</a>.</p>
</li>
<li><p class="startli">The programmer defines their own "user-side" modeling code similar to the code in <code>userproject/MBody1_project/model/map_classol.*</code> and <code>userproject/MBody1_project/model/classol_sim.*</code>. In this code,</p>
<p class="startli">a) They define the connectivity matrices between neuron groups. (In the MBody1 example those are read from files). Refer to the <a class="el" href="../../d5/d39/subsect34.html">Synaptic matrix types</a> section for the required format of connectivity matrices for dense or sparse connectivities.</p>
<p class="startli">b) They define input patterns (e.g. for Poisson neurons like in the MBody1 example) or individual initial values for neuron and / or synapse variables. </p><dl class="section note"><dt>Note</dt><dd>The initial values given in the <code>modelDefinition</code> are automatically applied homogeneously to every individual neuron or synapse in each of the neuron or synapse groups.</dd></dl>
<p>c) They use <code>stepTimeGPU(...);</code> to run one time step on the GPU or <code>stepTimeCPU(...);</code> to run one on the CPU. </p><dl class="section note"><dt>Note</dt><dd>Both GPU and CPU versions are always compiled, unless <code>-c</code> is used with genn-buildmodel to build a CPU-only model or the model uses features not supported by the CPU simulator. However, mixing CPU and GPU execution does not make too much sense. Among other things, The CPU version uses the same host side memory where to results from the GPU version are copied, which would lead to collisions between what is calculated on the CPU and on the GPU (see next point). However, in certain circumstances, expert users may want to split the calculation and calculate parts (e.g. neurons) on the GPU and parts (e.g. synapses) on the CPU. In such cases the fundamental kernel and function calls contained in <code>stepTimeXXX</code> need to be used and appropriate copies of the data from the CPU to the GPU and vice versa need to be performed.</dd></dl>
<p>d) They use functions like <code>copyStateFromDevice()</code> etc to transfer the results from GPU calculations to the main memory of the host computer for further processing.</p>
<p class="startli">e) They analyze the results. In the most simple case this could just be writing the relevant data to output files.</p>
</li>
</ol>
<p><br />
 </p><hr/>
<p> <a class="el" href="../../d8/d99/Installation.html">Previous</a> | <a class="el" href="../../d7/d98/Quickstart.html">Top</a> | <a class="el" href="../../d9/d61/Examples.html">Next</a> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Apr 11 2019 11:11:27 for GeNN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
