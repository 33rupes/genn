<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>GeNN: Tutorial 1</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<!--This is Google Analytics Tracking Code-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-57354659-1', 'auto');
  ga('send', 'pageview');
</script>
<!--End of Google Analytics Tracking Code-->
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em; padding-bottom: 0.5em;" id="projectlogo"><img alt="Logo" src="../../GeNN-logo-55px.gif"/></td>
  <td style="padding-left: 3.5em; padding-bottom: 0.5em;">
   <div id="projectname">GeNN
   &#160;<span id="projectnumber">2.1</span>
   </div>
   <div id="projectbrief">GPU enhanced Neuronal Networks (GeNN)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/dbb/Tutorial1.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Tutorial 1 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In this tutorial we will go through step by step instructions how to create and run a GeNN simulation starting from scratch. Normally, we recommend users to use one of the example projects as a starting point but it can be very instructive to go through the necessary steps one by one once to appreciate what parts make a GeNN simulation.</p>
<h1><a class="anchor" id="ModelDefinition"></a>
The Model Definition</h1>
<p>In this tutorial we will use a pre-defined neuron model type (TRAUBMILES) and create a simulation of ten Hodgkin-Huxley neurons <a class="el" href="../../d0/de3/citelist.html#CITEREF_Traub1991">[4]</a> without any synaptic connections. We will run this simulation on a GPU and save the results to stdout.</p>
<p>The first step is to write a model definition function in a model definition file. Create a new empty file <code>tenHHModel.cc</code> with your favourite editor, e.g. </p><div class="fragment"><div class="line">&gt;&gt; emacs tenHHModel.cc &amp;</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>The "&gt;&gt;" in the example code snippets refers to a shell prompt in a unix shell, do not enter them as part of your shell commands.</dd></dl>
<p>The model definition file contains the definition of the network model we want to simulate. First, we need to define the simulation step size <code>DT</code> and include the GeNN model specification codes <code><a class="el" href="../../dc/de1/modelSpec_8h.html" title="Header file that contains the class (struct) definition of neuronModel for defining a neuron model an...">modelSpec.h</a></code> and modelSpec.cc&lt;tt&gt;. Then the model definition takes the form of a function namedmodelDefinition<code>that takes one argument, passed by reference, of type</code><a class="el" href="../../dc/de5/classNNmodel.html" title="Structure to hold the information that defines synapse dynamics (a model of how synapse variables cha...">NNmodel</a><code>. Type in your</code>tenHHModel.cc` file: </p><div class="fragment"><div class="line"><span class="comment">// Model definintion file tenHHModel.cc</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define DT 0.1 </span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../dc/de1/modelSpec_8h.html">modelSpec.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d7/dfd/modelSpec_8cc.html">modelSpec.cc</a>&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="../../db/d0a/postVarsInPostLearn_8cc.html#a9aeaa0a22980484b2c472564fc9f686e">modelDefinition</a>(<a class="code" href="../../dc/de5/classNNmodel.html">NNmodel</a> &amp;model)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// definition of tenHHModel</span></div>
<div class="line">}</div>
</div><!-- fragment --><p> With this we have fixed the integration time step to <code>0.1</code> in the usual time units. The typical units in GeNN are <code>ms</code>, <code>mV</code>, <code>nF</code>, and <code>\form#10S</code>. Therefore, this defines <code>DT= 0.1 ms</code>. Now we need to fill the actual model definition.</p>
<p>Two standard elements to the `modelDefinition function are initialising GeNN and setting the name of the model: </p><div class="fragment"><div class="line"><a class="code" href="../../d7/dfd/modelSpec_8cc.html#a62ce532f6f7e535adfb9fe151a1c0c6b">initGeNN</a>();</div>
<div class="line">model.setName(<span class="stringliteral">&quot;tenHHModel&quot;</span>);</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>The name of the model given in the setName method does not need to match the file name of the model definition file. However, we strongly recommend it and if conflicting, the file name of the model definition file will prevail.</dd></dl>
<p>Making the actual model definition makes use of the <code>addNeuronPopulation</code> and 'addSynapsePopulation<code>member functions of the <a class="el" href="../../dc/de5/classNNmodel.html" title="Structure to hold the information that defines synapse dynamics (a model of how synapse variables cha...">NNmodel</a> object. The arguments to a call to</code>addNeuronPopulations are </p><ul>
<li><code>string name</code>: the name of the population </li>
<li><code>int N</code>: The number of neurons in the population </li>
<li><code>int type</code>: The type of neurons in the population </li>
<li><code>double *p</code>: An array of parameter values for teh neurons in the population </li>
<li><code>double *ini</code>: An array of initial values for neuron variables</li>
</ul>
<p>We first create the parameter and initial variable arrays, </p><div class="fragment"><div class="line"><span class="comment">// definition of tenHHModel</span></div>
<div class="line"><span class="keywordtype">double</span> p[7]= {</div>
<div class="line">  7.15,          <span class="comment">// 0 - gNa: Na conductance in muS</span></div>
<div class="line">  50.0,          <span class="comment">// 1 - ENa: Na equi potential in mV</span></div>
<div class="line">  1.43,          <span class="comment">// 2 - gK: K conductance in muS</span></div>
<div class="line"> -95.0,          <span class="comment">// 3 - EK: K equi potential in mV </span></div>
<div class="line">  0.02672,       <span class="comment">// 4 - gl: leak conductance in muS</span></div>
<div class="line">  -63.563,       <span class="comment">// 5 - El: leak equi potential in mV</span></div>
<div class="line">  0.143          <span class="comment">// 6 - Cmem: membr. capacity density in nF</span></div>
<div class="line">}; </div>
<div class="line"></div>
<div class="line"><span class="keywordtype">double</span> ini[4]= {</div>
<div class="line">  -60.0,         <span class="comment">// 0 - membrane potential V</span></div>
<div class="line">  0.0529324,     <span class="comment">// 1 - prob. for Na channel activation m</span></div>
<div class="line">  0.3176767,     <span class="comment">// 2 - prob. for not Na channel blocking h</span></div>
<div class="line">  0.5961207      <span class="comment">// 3 - prob. for K channel activation n</span></div>
<div class="line">};</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>The comments are obviously only for clarity, they can in principle be omitted. To avoid any confusion about the meaning of parameters and variables, however, we recommend strongly to always include comments of this type.</dd></dl>
<p>Having defined the parameter values and initial values we can now create the neuron population, </p><div class="fragment"><div class="line">model.addNeuronPopulation(<span class="stringliteral">&quot;Pop1&quot;</span>, 10, <a class="code" href="../../dc/de1/modelSpec_8h.html#a5cb672a4c033703aeb1b7ba7350cfbfd">TRAUBMILES</a>, p, ini);</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd><code>TRAUBMILES</code> is a variable defined in the GeNN model specification that contains the index number of the pre-defined Traub &amp; Miles model <a class="el" href="../../d0/de3/citelist.html#CITEREF_Traub1991">[4]</a>.</dd></dl>
<p>The model definition then needs to end on calling </p><div class="fragment"><div class="line">model.finalize();</div>
</div><!-- fragment --><p>This completes the model definition in this example. The complete <code>tenHHModel.cc</code> file now should look like this: </p><div class="fragment"><div class="line"><span class="comment">// Model definintion file tenHHModel.cc</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define DT 0.1 </span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../dc/de1/modelSpec_8h.html">modelSpec.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d7/dfd/modelSpec_8cc.html">modelSpec.cc</a>&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="../../db/d0a/postVarsInPostLearn_8cc.html#a9aeaa0a22980484b2c472564fc9f686e">modelDefinition</a>(<a class="code" href="../../dc/de5/classNNmodel.html">NNmodel</a> &amp;model)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// definition of tenHHModel</span></div>
<div class="line">  <a class="code" href="../../d7/dfd/modelSpec_8cc.html#a62ce532f6f7e535adfb9fe151a1c0c6b">initGeNN</a>();</div>
<div class="line">  model.<a class="code" href="../../dc/de5/classNNmodel.html#a757eff2a5877688e6e5492726df035ee">setName</a>(<span class="stringliteral">&quot;tenHHModel&quot;</span>);</div>
<div class="line">  <span class="keywordtype">double</span> p[7]= {</div>
<div class="line">    7.15,          <span class="comment">// 0 - gNa: Na conductance in muS</span></div>
<div class="line">    50.0,          <span class="comment">// 1 - ENa: Na equi potential in mV</span></div>
<div class="line">    1.43,          <span class="comment">// 2 - gK: K conductance in muS</span></div>
<div class="line">   -95.0,          <span class="comment">// 3 - EK: K equi potential in mV </span></div>
<div class="line">    0.02672,       <span class="comment">// 4 - gl: leak conductance in muS</span></div>
<div class="line">    -63.563,       <span class="comment">// 5 - El: leak equi potential in mV</span></div>
<div class="line">    0.143          <span class="comment">// 6 - Cmem: membr. capacity density in nF</span></div>
<div class="line">  }; </div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">double</span> ini[4]= {</div>
<div class="line">    -60.0,         <span class="comment">// 0 - membrane potential V</span></div>
<div class="line">    0.0529324,     <span class="comment">// 1 - prob. for Na channel activation m</span></div>
<div class="line">    0.3176767,     <span class="comment">// 2 - prob. for not Na channel blocking h</span></div>
<div class="line">    0.5961207      <span class="comment">// 3 - prob. for K channel activation n</span></div>
<div class="line">  };</div>
<div class="line">  model.<a class="code" href="../../dc/de5/classNNmodel.html#a32c254358da2f8c43c91291d24cfd295">addNeuronPopulation</a>(<span class="stringliteral">&quot;Pop1&quot;</span>, 10, <a class="code" href="../../dc/de1/modelSpec_8h.html#a5cb672a4c033703aeb1b7ba7350cfbfd">TRAUBMILES</a>, p, ini);</div>
<div class="line">  model.<a class="code" href="../../dc/de5/classNNmodel.html#aaee7f16c9627dddb2588bad24afe5d15">finalize</a>();</div>
<div class="line">}</div>
</div><!-- fragment --><p> This model definition suffices to generate code for simulating the ten Hodgkin-Huxley neurons on the a GPU or CPU. The second part of a GeNN simulation is the user code that sets up the simulation, does the data handling for input and output and generally defines the numerical experiment to be run.</p>
<h1><a class="anchor" id="userCode"></a>
User Code</h1>
<p>For the purposes of this tutorial we will initially simply run the model for one simulated second and record the final neuron variables into a file. GeNN provides the code for simulating the model in a function called <code>stepTimeCPU()</code> (execution on CPU only) or <code>stepTimeGPU()</code> (execution on a GPU). To make use of this code we need to define a minimal C/C++ main function. Open a new empty file <code>tenHHSimulation.cc</code> in an editor and type </p><div class="fragment"><div class="line"><span class="comment">// tenHHModel simulation code</span></div>
<div class="line"><span class="preprocessor">#include &quot;tenHHModel.cc&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;tenHHModel_CODE/runner.cc&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="../../db/d8a/testPostVarsInPostLearn_8cu.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>()</div>
<div class="line">{</div>
<div class="line">  allocateMem();</div>
<div class="line">  initialize();</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><p> This boiler plate code includes the relevant model definition file we completed earlier and the entry point to the generated code <code>runner.cc</code> in the subdirectory <code>tenHHModel_CODE</code> where GeNN deposits all generated code.</p>
<p>Calling <code>allocateMem()</code> allocates the memory structures for all neuron variables and <code>initialize()</code> sets the initial values and copies values to the GPU.</p>
<p>Now we can use the generated code to execute the integration of the neuron equations provided by GeNN. To do so, we add after <code>initialize();</code> </p><div class="fragment"><div class="line">stepTimeGPU(1000.0);</div>
</div><!-- fragment --><p> and we need to copy the result, and output it to stdout, </p><div class="fragment"><div class="line">pullPop1fromDevice();</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i= 0; i &lt; 10; i++) {  </div>
<div class="line">  cout &lt;&lt; VPop1[i] &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line">  cout &lt;&lt; mPop1[i] &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line">  cout &lt;&lt; hPop1[i] &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line">  cout &lt;&lt; nPop1[i] &lt;&lt; endl;</div>
<div class="line">}</div>
</div><!-- fragment --><p> <code>pullPop1fromDevice()</code> copies all relevant state variables of the <code>Pop1</code> neuron group from the GPU to the CPU main memory. Then we can output the results to stdout by looping through all 10 neurons and outputting the state variables VPop1, mPop1, hPop1, nPop1. </p><dl class="section note"><dt>Note</dt><dd>The naming convention for variables in GeNN is the variable name defined by the neuron type, here TRAUBMILES defining V, m, h, and n, followed by the population name, here <code>Pop1</code>.</dd></dl>
<p>This completes the user code. The complete <code>tenHHSimulation.cu</code> file shoul now look like </p><div class="fragment"><div class="line"><span class="comment">// tenHHModel simulation code</span></div>
<div class="line"><span class="preprocessor">#include &quot;tenHHModel.cc&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;tenHHModel_CODE/runner.cc&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> <a class="code" href="../../db/d8a/testPostVarsInPostLearn_8cu.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>()</div>
<div class="line">{</div>
<div class="line">  allocateMem();</div>
<div class="line">  initialize();</div>
<div class="line">  stepTimeGPU(1000.0);</div>
<div class="line">  pullPop1fromDevice();</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i= 0; i &lt; 10; i++) {  </div>
<div class="line">    cout &lt;&lt; VPop1[i] &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line">    cout &lt;&lt; mPop1[i] &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line">    cout &lt;&lt; hPop1[i] &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line">    cout &lt;&lt; nPop1[i] &lt;&lt; endl;</div>
<div class="line">  }  </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="Makefile"></a>
Makefile</h1>
<p>A GeNN simulation is built with a simple Makefile. On Unix systems we typically name it <code>GNUmakefile</code>. Create this file and enter </p><div class="fragment"><div class="line">EXECUTABLE      :=tenHHSimulation</div>
<div class="line">SOURCES         :=tenHHSimulation.cu</div>
<div class="line"></div>
<div class="line">include $(GENN_PATH)/userproject/include/makefile_common_gnu.mk</div>
</div><!-- fragment --><p> This defines that the final executable of this simulation is named tenHHSimulation and the simulation code is given in the file <code>tenHHSimulation.cu</code> that we completed above.</p>
<p>Now we are ready to compile and run the simulation</p>
<h1><a class="anchor" id="MakeRun"></a>
Making and Running the Simulation</h1>
<p>To build the model and generate the GeNN code, type in a terminal where you are in the directory containing your <code>tenHHModel.cc</code> file, </p><div class="fragment"><div class="line">&gt;&gt; buildmodel.sh tenHHModel</div>
</div><!-- fragment --><p> If your environment variables <code>GENN_PATH</code> and <code>CUDA_PATH</code> are correctly configured, you should see some compile output ending in <code>Model build complete ...</code>. Now type </p><div class="fragment"><div class="line">make</div>
</div><!-- fragment --><p> This should compile your <code>tenHHSimulation</code> executable and you can execute it with </p><div class="fragment"><div class="line">./tenHHSimulation</div>
</div><!-- fragment --><p> The output you obtain should look like </p><div class="fragment"><div class="line">-63.7838 0.0350042 0.336314 0.563243</div>
<div class="line">-63.7838 0.0350042 0.336314 0.563243</div>
<div class="line">-63.7838 0.0350042 0.336314 0.563243</div>
<div class="line">-63.7838 0.0350042 0.336314 0.563243</div>
<div class="line">-63.7838 0.0350042 0.336314 0.563243</div>
<div class="line">-63.7838 0.0350042 0.336314 0.563243</div>
<div class="line">-63.7838 0.0350042 0.336314 0.563243</div>
<div class="line">-63.7838 0.0350042 0.336314 0.563243</div>
<div class="line">-63.7838 0.0350042 0.336314 0.563243</div>
<div class="line">-63.7838 0.0350042 0.336314 0.563243</div>
</div><!-- fragment --><p> This completes this tutorial. You have created a GeNN model and simulated it successfully!</p>
<h1><a class="anchor" id="Input"></a>
Adding External Input</h1>
<p>In the example we have created so far, the neurons are not connected and do not receive input. As the TRAUBMILES model is silent in such conditions, the ten neurons simply will simply rest at their resting potential. To make things more interesting, let us add a constant input to all neurons, add to the end of the <code>modelDefinition</code> function </p><div class="fragment"><div class="line">model.<a class="code" href="../../dc/de5/classNNmodel.html#a95724e1798bd9ac5642a8fb2484a2f93">activateDirectInput</a>(<span class="stringliteral">&quot;Pop1&quot;</span>, <a class="code" href="../../dc/de1/modelSpec_8h.html#a921b56858504259e999652795a93f6be">CONSTINP</a>);</div>
<div class="line">model.<a class="code" href="../../dc/de5/classNNmodel.html#a25ab2e7846813491aff8276a8a1b00b1">setConstInp</a>(<span class="stringliteral">&quot;Pop1&quot;</span>, 0.1);</div>
</div><!-- fragment --><p> This will add a constant input of 0.1 nA to all ten neurons. When run with this addition you should observe the output </p><div class="fragment"><div class="line">-63.1468 0.0211871 0.987233 0.0423695</div>
<div class="line">-63.1468 0.0211871 0.987233 0.0423695</div>
<div class="line">-63.1468 0.0211871 0.987233 0.0423695</div>
<div class="line">-63.1468 0.0211871 0.987233 0.0423695</div>
<div class="line">-63.1468 0.0211871 0.987233 0.0423695</div>
<div class="line">-63.1468 0.0211871 0.987233 0.0423695</div>
<div class="line">-63.1468 0.0211871 0.987233 0.0423695</div>
<div class="line">-63.1468 0.0211871 0.987233 0.0423695</div>
<div class="line">-63.1468 0.0211871 0.987233 0.0423695</div>
<div class="line">-63.1468 0.0211871 0.987233 0.0423695</div>
</div><!-- fragment --><p> This is still not particularly interesting as we are just observing the final value of the membrane potentials. To see what is going on in the meantime, we need to copy intermediate values from the device and best save them into a file. This can be done in many ways but one sensible way of doing this is to replace the line </p><div class="fragment"><div class="line">stepTimeGPU(1000.0);</div>
</div><!-- fragment --><p> in <code>tenHHSimulation.cu</code> to something like this: </p><div class="fragment"><div class="line">ofstream os(<span class="stringliteral">&quot;tenHH_output.V.dat&quot;</span>);</div>
<div class="line"><span class="keywordtype">double</span> <a class="code" href="../../d4/de3/VClampGA_8h.html#a87accd1af8e0aff4b818d891374f7cec">t</a>= 0.0;</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i= 0; i &lt; 5000; i++) {</div>
<div class="line">  stepTimeGPU(0.2);</div>
<div class="line">  pullPop1fromDevice();</div>
<div class="line">  os &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j= 0; j &lt; 10; j++) {</div>
<div class="line">    os &lt;&lt; VPop1[j] &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line">  }</div>
<div class="line">  os &lt;&lt; endl;</div>
<div class="line">  t+= 0.2;</div>
<div class="line">}</div>
<div class="line">os.close();</div>
</div><!-- fragment --><p> After building, making and executing, </p><div class="fragment"><div class="line">builmodel.sh tenHHModel</div>
<div class="line">make clean all</div>
<div class="line">./tenHHSimulation</div>
</div><!-- fragment --><p> there should be a file <code>tenHH_output.V.dat</code> in the same directory. If you plot column one (time) against column two (voltage of neuron 0), you should observe dynamics like this: </p><div class="image">
<img src="../../tenHHexample.png" alt="tenHHexample.png"/>
</div>
 <p>The completed files from this tutorial can be found in <code>userproject/tenHH_project</code>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Jun 12 2015 22:48:36 for GeNN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
