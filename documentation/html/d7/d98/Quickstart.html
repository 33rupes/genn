<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>GeNN: Quickstart</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<!--This is Google Analytics Tracking Code-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-57354659-1', 'auto');
  ga('send', 'pageview');
</script>
<!--End of Google Analytics Tracking Code-->
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em; padding-bottom: 0.5em;" id="projectlogo"><img alt="Logo" src="../../GeNN-logo-55px.gif"/></td>
  <td style="padding-left: 3.5em; padding-bottom: 0.5em;">
   <div id="projectname">GeNN
   &#160;<span id="projectnumber">2.0</span>
   </div>
   <div id="projectbrief">GPU enhanced Neuronal Networks (GeNN)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d7/d98/Quickstart.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Quickstart </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>GeNN is based on the idea of code generation for the involved GPU or CPU simulation code for neuronal network models but leaves a lot of freedom how to use the generated code in the final application. To facilitate the use of GeNN on the background of this philosophy it comes with a number of complete examples containing both the model description code that is used by GeNN for code generation and the "user side code" to run the generated model and safe the results. Running these complete examples should be achievable in a few minutes. The necessary steps are described below.</p>
<h1><a class="anchor" id="unix_quick"></a>
Running an Example Model in Unix</h1>
<p>In order to get a quick start and run a provided model, open a shell, navigate to <code>GeNN/tools</code> and type </p><div class="fragment"><div class="line">make</div>
</div><!-- fragment --><p> This will compile additional tools for creating and running example projects. For a first complete test, the system is best used with a full driver program such as in the <a class="el" href="../../d9/d61/Examples.html#ex_mbody">Insect Olfaction Model</a> example: </p><div class="fragment"><div class="line">tools/generate_run [<a class="code" href="../../dc/d25/modelSpec_01_07dhcp-liversidge20_8anu_8edu_8au's_01conflicted_01copy_012014-12-13_08_8h.html#ad703205f9a4d4bb6af9c25257c23ce6d">CPU</a>/<a class="code" href="../../dc/d25/modelSpec_01_07dhcp-liversidge20_8anu_8edu_8au's_01conflicted_01copy_012014-12-13_08_8h.html#a39cb9803524b6f3b783344b2f89867b4">GPU</a>] [#AL] [#KC] [#LH] [#DN] [gscale] [OUTNAME] [MODEL] [DEBUG] [FTYPE] [REUSE]. </div>
</div><!-- fragment --><p>To compile <code>generate_run.cc</code>, navigate to the <code>userproject/MBody1_project</code> directory and type </p><div class="fragment"><div class="line">make all</div>
</div><!-- fragment --><p> This will generate an executable that you can invoke with, e.g., </p><div class="fragment"><div class="line">./generate_run 1 100 1000 20 100 0.0025 test1 MBody1 0 <a class="code" href="../../dc/d25/modelSpec_01_07dhcp-liversidge20_8anu_8edu_8au's_01conflicted_01copy_012014-12-13_08_8h.html#ae8690abbffa85934d64d545920e2b108">FLOAT</a> 0</div>
</div><!-- fragment --><p> which would generate and simulate a model of the locust olfactory system with 100 projection neurons, 1000 Kenyon cells, 20 lateral horn interneurons and 100 output neurons n the mushroom body lobes.</p>
<p>The tool generate_run will generate connectivity matrices for the model <code>MBody1</code> and store them into files, compile and run the model on the GPU using these files as inputs and output the resulting spiking activity. To fix the GPU used, replace the first argument <code>1</code> with the device number of the desired GPU plus 2, e.g., <code>2</code> for GPU 0. All input and output files will be prefixed with <code>test1</code> and will be created in a sub-directory with the name <code>test1_output</code>. The third to last parameter <code>0</code> will switch the debugging mode off, <code>1</code> would switch it on. More about debugging in the <a class="el" href="../../">debugging section </a>. The parameter <code>FLOAT</code> will run the model in float (single precision floating point), using <code>DOUBLE</code> would use double precision. The last parameter regulates whether previously generated files for connectivity and input should be reused (1) or files should be generated anew (0).</p>
<p>The MBody1 example is already a highly integrated example that showcases many of the features of GeNN and how to program the user-side code for a GeNN application. More details in the <a class="el" href="../../dc/d05/UserManual.html">User Manual </a></p>
<h1><a class="anchor" id="windows_quick"></a>
Running an Example Model in Windows</h1>
<p>All interaction with GeNN programs are command-line based and hence are executed within a <code>cmd</code> window. Open a <code>cmd</code> window and navigate to the <code>userprojects\tools</code> directory. </p><div class="fragment"><div class="line">cd %GENN_PATH%\userprojects\tools</div>
</div><!-- fragment --><p> Then type </p><div class="fragment"><div class="line">make.bat all</div>
</div><!-- fragment --><p> to compile a number of tools that are used by the example projects to generate connectivity and inputs to model networks.</p>
<p>The navigate to the <code>MBody1_project</code> directory. </p><div class="fragment"><div class="line">cd ..\MBody1_project</div>
</div><!-- fragment --><p> By typing </p><div class="fragment"><div class="line">make.bat all</div>
</div><!-- fragment --><p> you can compile the <code>generate_run</code> engine that allows to run a <a class="el" href="../../d9/d61/Examples.html#ex_mbody">Insect Olfaction Model</a> model of the insect mushroom body: </p><div class="fragment"><div class="line">tools/generate_run [<a class="code" href="../../dc/d25/modelSpec_01_07dhcp-liversidge20_8anu_8edu_8au's_01conflicted_01copy_012014-12-13_08_8h.html#ad703205f9a4d4bb6af9c25257c23ce6d">CPU</a>/<a class="code" href="../../dc/d25/modelSpec_01_07dhcp-liversidge20_8anu_8edu_8au's_01conflicted_01copy_012014-12-13_08_8h.html#a39cb9803524b6f3b783344b2f89867b4">GPU</a>] [#AL] [#KC] [#LH] [#DN] [gscale] [DIR] [EXE] [MODEL] [DEBUG OFF/ON]. </div>
</div><!-- fragment --><p> To invoke <code>generate_run.exe</code> type, e.g., </p><div class="fragment"><div class="line">generate_run.exe 1 100 1000 20 100 0.0025 test1 MBody1 0 </div>
</div><!-- fragment --><p> which would generate and simulate a model of the locust olfactory system with 100 projection neurons, 1000 Kenyon cells, 20 lateral horn interneurons and 100 output neurons n the mushroom body lobes.</p>
<p>The tool <code>generate_run.exe</code> will generate connectivity matrices for the model <code>MBody1</code> and store them into files, compile and run the model on an automatically chosen GPU using these files as inputs and output the resulting spiking activity. To fix the GPU used, replace the first argument <code>1</code> with the device number of the desired GPU plus 2, e.g., <code>2</code> for GPU 0. All input and output files will be prefixed with <code>test1</code> and will be created in a sub-directory with the name <code>test1_output</code>. The last parameter <code>0</code> will switch the debugging mode off, <code>1</code> would switch it on. More about debugging in the <a class="el" href="../../">debugging section </a>.</p>
<p>The MBody1 example is already a highly integrated example that showcases many of the features of GeNN and how to program the user-side code for a GeNN application. <a class="el" href="../../">More details in the User Manual </a></p>
<h1><a class="anchor" id="how_to"></a>
How to use GeNN for New Projects</h1>
<p>Creating and running projects in GeNN involves a few steps ranging from defining the fundamentals of the model, inputs to the model, dteails of the model like specific connectivity matrices or initial values, running the model and analyzing or saving the data.</p>
<p>The most common way to use GeNN is to create or modify a program such as <code><a class="el" href="../../d7/d80/userproject_2MBody1__project_2generate__run_8cc.html">userproject/MBody1_project/generate_run.cc</a></code> that wraps around other programs that are used for each of the necessary steps listed above. In more detail, what <code>generate_run</code> and similar programs do is:</p>
<ol type="1">
<li>To use other tools (programs) to generate connectivity matrices and store them into files.</li>
<li>To build the source code of a model simulation using GeNN. In the example of the MBody1_project this entails writing neuron numbers into <code><a class="el" href="../../d4/deb/sizes_8h.html">userproject/include/sizes.h</a></code>, and executing <div class="fragment"><div class="line">buildmodel.sh MBody1 [DEBUG OFF/ON]</div>
</div><!-- fragment --> The <code>buildmodel.sh</code> script compiles the installed GeNN code generator in conjunction with the user-provided model description (see <a class="el" href="../../d7/d98/Quickstart.html#ownmodel">below</a>), in this example <code>model/MBody1.cc</code>. It then executes the GeNN code generator to generate the complete model simulation code for the MBody1 model.</li>
<li>To compile the generated model code, that can be found in <code>model/MBody1_CODE/</code> by invoking <code>make clean &amp;&amp; make</code> in the <code>model</code> directory. It is at this stage that GeNN generated model simulation code is combined with user-side run-time code, in this example <code>classol_sim.cu</code> (classify-olfaction-simulation) which uses the <code>map_classol</code> (map-neuron-based-classifier-olfaction) class.</li>
<li>To finally run the resulting stand-alone simulator executable, in the MBody1 example <code>classol_sim</code> in the <code>model</code> directory.</li>
</ol>
<p>The <code>generate_run</code> tool is only a suggested usage scenario of GeNN. Alternatively, users can manually execute the four steps above or integrate GeNN with development environments of their own choice.</p>
<dl class="section note"><dt>Note</dt><dd>The usage scenario described was made explicit for Unix environments. In Windows the setup is essentially the same except for the usual operating system dependent syntax differences, e.g. the build script is named buildmodel.bat, compilation of the generated model simulator would be <code>make.bat clean &amp;&amp; make.bat all</code>, or, <code>nmake /f WINmakefile clean &amp;&amp; nmake /f WINmakefile all</code>, and the resulting executable would be named <code>classol_sim.exe</code>.</dd></dl>
<p>GeNN comes with several example projects which showcase how to use its features. The MBody1 example discussed above is one of the many provided examples that are described in more detail in <a class="el" href="../../d9/d61/Examples.html">Example projects</a>.</p>
<h1><a class="anchor" id="ownmodel"></a>
Defining a New Model in GeNN</h1>
<p>According to the workflow outlined above, there are several steps to be completed to define a neuronal network model.</p>
<ol type="1">
<li>The neuronal network of interest is defined in a model definitoin file, e.g. <code>Example1.cc</code>. <dl class="section note"><dt>Note</dt><dd>GeNN follows a convention in which C/C++ files end with <code>.cc</code> and the model definition file will only be recognizd by the <code>buildmodel.sh</code> or <code>buildmodel.bat</code> scripts if it follows this convention and ends on <code>.cc</code>.</dd></dl>
</li>
<li><p class="startli">Within the the model definition file <code>Example1.cc</code>, the following tasks need to be completed:</p>
<p class="startli">a) The time step <code>DT</code> needs to be defined, e.g. </p><div class="fragment"><div class="line"><span class="preprocessor">#define DT 0.1</span></div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>All provided examples and pre-defined model elements in GeNN work with units of mV, ms, nF and muS. However, the choice of units is entirely left to the user if custom model elements are used.</dd></dl>
<p>b) The GeNN files <code><a class="el" href="../../dc/de1/modelSpec_8h.html" title="Header file that contains the class (struct) definition of neuronModel for defining a neuron model an...">modelSpec.h</a></code> and <code><a class="el" href="../../d7/dfd/modelSpec_8cc.html">modelSpec.cc</a></code> need to be included, </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../dc/de1/modelSpec_8h.html">modelSpec.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d7/dfd/modelSpec_8cc.html">modelSpec.cc</a>&quot;</span></div>
</div><!-- fragment --><p> c) The values for initial variables and parameters for neuron and synapse populations need to be defined, e.g. </p><div class="fragment"><div class="line"><span class="keywordtype">float</span> <a class="code" href="../../dd/d09/tmp_2model_2MBody__userdef_8cc.html#aa8fe3267f630659c3634841347ae2e09">myPOI_p</a>[4]= {</div>
<div class="line">  0.1,        <span class="comment">// 0 - firing rate</span></div>
<div class="line">  2.5,        <span class="comment">// 1 - refratory period</span></div>
<div class="line">  20.0,       <span class="comment">// 2 - Vspike</span></div>
<div class="line">  -60.0       <span class="comment">// 3 - Vrest</span></div>
<div class="line">};</div>
</div><!-- fragment --><p> would define the (homogeneous) parameters for a population of Poisson neurons. </p><dl class="section note"><dt>Note</dt><dd>The number of required parameters and their meaning is defined by the neuron or synapse type. Refer to the <a class="el" href="../../dc/d05/UserManual.html">User Manual</a> for details. <br />
 If heterogeneous parameter values are needed for any particular population of neurons (synapses), a new neuron (synapse) type needs to be defined in which these parameters are defined as variables rather than parameters. See the <a class="el" href="../../dc/d05/UserManual.html">User Manual</a> for how to define new neuron (synapse) types.</dd></dl>
<p>d) the actual network needs to be defined in the form of a function <code>modelDefinition</code>, i.e. </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="../../d3/dc0/currentModel_8cc.html#a9aeaa0a22980484b2c472564fc9f686e">modelDefinition</a>(<a class="code" href="../../dc/de5/classNNmodel.html">NNmodel</a> &amp;model); </div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>The name <code>modelDefinition</code> and its parameter of type <code><a class="el" href="../../dc/de5/classNNmodel.html" title="Structure to hold the information that defines synapse dynamics (a model of how synapse variables cha...">NNmodel</a>&amp;</code> are fixed and cannot be changed if GeNN is to recognise it as a model definition.</dd></dl>
<p><code>MBody1.cc</code> shows a typical example of a model definition function. In its core tt contains calls to <code>model.addNeuronPopulation</code> and <code>model.addSynapsePopulation</code> to build up the network. For a full range of options for defining a network, refer to the <a class="el" href="../../dc/d05/UserManual.html">User Manual</a>.</p>
</li>
<li><p class="startli">The programmer defines her own "user-side" modeling code similar to the code in <code>userproject/MBody1_project/model/map_classol.*</code> and <code>userproject/MBody1_project/model/classol_sim.*</code>. In this code,</p>
<p class="startli">a) she defines the connectivity matrices between neuron groups. (In the MBody1 example those are read from files). Refer to the <a class="el" href="../../dc/d05/UserManual.html">User Manual</a> for the required format of connectivity matrices for dense or sparse connectivities.</p>
<p class="startli">b) she defines input patterns (e.g. for Poisson neurons like in the MBody1 example) or individual initial values for neuron and/or synapse variables. </p><dl class="section note"><dt>Note</dt><dd>The initial values given in the <code>modelDefinition</code> are automatically applied homogeneously to every individual neuron or synapse in each of the neuron or synapse groups.</dd></dl>
<p>c) she uses <code>stepTimeGPU(...);</code> to run one time step on the GPU or <code>stepTimeCPU(...);</code> to run one on the CPU. (both GPU and CPU versions are always compiled). </p><dl class="section note"><dt>Note</dt><dd>However, mixing CPU and GPU execution does not make too much sense. Among pother things, The CPU version uses the same host side memory whereto results from the GPU version are copied, which would lead to collisions between what is calculated on the CPU and on the GPU (see next point). However, in certain circumstances, expert users may want to split the calculation and calculate parts (e.g. neurons) on the GPU and parts (e.g. synapses) on the CPU. In such cases the fundamental kernel and function calls contained in <code>stepTimeXXX</code> need to be used and appropriate copies of the data from teh CPU to the GPU and vice versa need to be performed.</dd></dl>
<p>d) she uses functions like <code>copyStateFromDevice()</code> etc to transfer the results from GPU calculations to the main memory of the host computer for further processing.</p>
<p class="startli">e) she analyzes the results. In the most simple case this could just be writing the relevant data to output files.</p>
</li>
</ol>
<p><br />
 </p><hr/>
<p> <a class="el" href="../../d8/d99/Installation.html">Previous</a> | <a class="el" href="../../d7/d98/Quickstart.html">Top</a> | <a class="el" href="../../d9/d61/Examples.html">Next</a> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Dec 18 2014 08:39:25 for GeNN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
