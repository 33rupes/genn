<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>GeNN: Weight update models</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<!--This is Google Analytics Tracking Code-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-57354659-1', 'auto');
  ga('send', 'pageview');
</script>
<!--End of Google Analytics Tracking Code-->
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="html_styles.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em; padding-bottom: 0.5em;" id="projectlogo"><img alt="Logo" src="GeNN-logo-55px.gif"/></td>
  <td style="padding-left: 3.5em; padding-bottom: 0.5em;">
   <div id="projectname">GeNN
   &#160;<span id="projectnumber">3.2.0</span>
   </div>
   <div id="projectbrief">GPU enhanced Neuronal Networks (GeNN)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('sectSynapseModels.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Weight update models </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Currently 3 predefined weight update models are available:</p><ul>
<li><a class="el" href="d9/d74/classWeightUpdateModels_1_1StaticPulse.html" title="Pulse-coupled, static synapse. ">WeightUpdateModels::StaticPulse</a></li>
<li><a class="el" href="d2/d53/classWeightUpdateModels_1_1StaticPulseDendriticDelay.html" title="Pulse-coupled, static synapse with heterogenous dendritic delays. ">WeightUpdateModels::StaticPulseDendriticDelay</a></li>
<li><a class="el" href="d6/d64/classWeightUpdateModels_1_1StaticGraded.html" title="Graded-potential, static synapse. ">WeightUpdateModels::StaticGraded</a></li>
<li><a class="el" href="df/d86/classWeightUpdateModels_1_1PiecewiseSTDP.html" title="This is a simple STDP rule including a time delay for the finite transmission speed of the synapse...">WeightUpdateModels::PiecewiseSTDP</a></li>
</ul>
<p>For more details about these built-in synapse models, see <a class="el" href="d0/de3/citelist.html#CITEREF_Nowotny2010">[4]</a>.</p>
<h1><a class="anchor" id="sect34"></a>
Defining a new weight update model</h1>
<p>Like the neuron models discussed in <a class="el" href="sectNeuronModels.html#sect_own">Defining your own neuron type</a>, new weight update models are created by defining a class. Weight update models should all be derived from WeightUpdateModel::Base and, for convenience, the methods a new weight update model should implement can be implemented using macros:</p>
<ul>
<li><a class="el" href="de/d6c/snippet_8h.html#aa592bfe3ce05ffc19a8f21d8482add6b">SET_DERIVED_PARAMS()</a>, <a class="el" href="de/d6c/snippet_8h.html#a75315265035fd71c5b5f7d7f449edbd7">SET_PARAM_NAMES()</a>, <a class="el" href="d4/ded/newModels_8h.html#a3025b9fc844fccdf8cc2b51ef4a6e0aa">SET_VARS()</a> and <a class="el" href="da/d49/currentSourceModels_8h.html#aa33e3634a531794ddac1ad49bde09071">SET_EXTRA_GLOBAL_PARAMS()</a> perform the same roles as they do in the neuron models discussed in <a class="el" href="sectNeuronModels.html#sect_own">Defining your own neuron type</a>.</li>
<li><a class="el" href="d4/d0f/newWeightUpdateModels_8h.html#a611a9113f742a9d07d3def4298a0ea68">DECLARE_WEIGHT_UPDATE_MODEL(TYPE, NUM_PARAMS, NUM_VARS, NUM_PRE_VARS, NUM_POST_VARS)</a> is an extended version of <code><a class="el" href="d4/ded/newModels_8h.html#ae0c817e85c196f39cf62d608883cda13">DECLARE_MODEL()</a></code> which declares the boilerplate code required for a weight update model with pre and postsynaptic as well as per-synapse state variables.</li>
<li><a class="el" href="d4/d0f/newWeightUpdateModels_8h.html#a9a2bc6f56fa2bfb7008e915710720cfd">SET_PRE_VARS()</a> and <a class="el" href="d4/d0f/newWeightUpdateModels_8h.html#a906e656a5980ea57c9f1b7c3185e876b">SET_POST_VARS()</a> define state variables associated with pre or postsynaptic neurons rather than synapses. These are typically used to efficiently implement <em>trace</em> variables for use in STDP learning rules <a class="el" href="d0/de3/citelist.html#CITEREF_Morrison2008">[2]</a>. Like other state variables, variables defined here as <code>NAME</code> can be accessed in weight update model code strings using the $(NAME) syntax.</li>
<li><a class="el" href="d4/d0f/newWeightUpdateModels_8h.html#a8d014c818d8ee68f3a16838dcd4f030f">SET_SIM_CODE(SIM_CODE)</a>: defines the simulation code that is used when a true spike is detected. The update is performed only in timesteps after a neuron in the presynaptic population has fulfilled its threshold detection condition. Typically, spikes lead to update of synaptic variables that then lead to the activation of input into the post-synaptic neuron. Most of the time these inputs add linearly at the post-synaptic neuron. This is assumed in GeNN and the term to be added to the activation of the post-synaptic neuron should be applied using the the $(addToInSyn, weight) function. For example <div class="fragment"><div class="line"><a class="code" href="d0/dcb/newNeuronModels_8h.html#a8d014c818d8ee68f3a16838dcd4f030f">SET_SIM_CODE</a>(</div><div class="line">    <span class="stringliteral">&quot;$(addToInSyn, $(inc));\n&quot;</span></div></div><!-- fragment --> where "inc" is the increment of the synaptic input to a post-synaptic neuron for each pre-synaptic spike. The simulation code also typically contains updates to the internal synapse variables that may have contributed to . For an example, see <a class="el" href="d9/d74/classWeightUpdateModels_1_1StaticPulse.html" title="Pulse-coupled, static synapse. ">WeightUpdateModels::StaticPulse</a> for a simple synapse update model and <a class="el" href="df/d86/classWeightUpdateModels_1_1PiecewiseSTDP.html" title="This is a simple STDP rule including a time delay for the finite transmission speed of the synapse...">WeightUpdateModels::PiecewiseSTDP</a> for a more complicated model that uses STDP. To apply input to the post-synaptic neuron with a dendritic (i.e. between the synapse and the postsynaptic neuron) delay you can instead use the $(addToInSynDelay, weight, delay) function. For example <div class="fragment"><div class="line"><a class="code" href="d0/dcb/newNeuronModels_8h.html#a8d014c818d8ee68f3a16838dcd4f030f">SET_SIM_CODE</a>(</div><div class="line">    <span class="stringliteral">&quot;$(addToInSynDelay, $(inc), $(delay));&quot;</span>);</div></div><!-- fragment --> where, once again, <code>inc</code> is the magnitude of the input step to apply and <code>delay</code> is the length of the dendritic delay in timesteps. By implementing <code>delay</code> as a weight update model variable, heterogeneous synaptic delays can be implemented. For an example, see <a class="el" href="d2/d53/classWeightUpdateModels_1_1StaticPulseDendriticDelay.html" title="Pulse-coupled, static synapse with heterogenous dendritic delays. ">WeightUpdateModels::StaticPulseDendriticDelay</a> for a simple synapse update model with heterogeneous dendritic delays. <dl class="section note"><dt>Note</dt><dd>When using dendritic delays, the <b>maximum</b> dendritic delay for a synapse populations must be specified using the <code><a class="el" href="dc/dfa/classSynapseGroup.html#a220307d4043e8bf1bed07552829f2a17" title="Sets the maximum dendritic delay for synapses in this synapse group. ">SynapseGroup::setMaxDendriticDelayTimesteps()</a></code> function.</dd></dl>
</li>
<li><a class="el" href="d4/d0f/newWeightUpdateModels_8h.html#a9e0fecc624daee536a388777788cd9de">SET_EVENT_THRESHOLD_CONDITION_CODE(EVENT_THRESHOLD_CONDITION_CODE)</a> defines a condition for a synaptic event. This typically involves the pre-synaptic variables, e.g. the membrane potential: <div class="fragment"><div class="line"><a class="code" href="d4/d0f/newWeightUpdateModels_8h.html#a9e0fecc624daee536a388777788cd9de">SET_EVENT_THRESHOLD_CONDITION_CODE</a>(<span class="stringliteral">&quot;$(V_pre) &gt; -0.02&quot;</span>);</div></div><!-- fragment --> Whenever this expression evaluates to true, the event code set using the <a class="el" href="d4/d0f/newWeightUpdateModels_8h.html#a8159c6f595e865d6bf609f045c07361e">SET_EVENT_CODE()</a> macro is executed. For an example, see <a class="el" href="d6/d64/classWeightUpdateModels_1_1StaticGraded.html" title="Graded-potential, static synapse. ">WeightUpdateModels::StaticGraded</a>.</li>
<li><a class="el" href="d4/d0f/newWeightUpdateModels_8h.html#a8159c6f595e865d6bf609f045c07361e">SET_EVENT_CODE(EVENT_CODE)</a> defines the code that is used when the event threshold condition is met (as set using the <a class="el" href="d4/d0f/newWeightUpdateModels_8h.html#a9e0fecc624daee536a388777788cd9de">SET_EVENT_THRESHOLD_CONDITION_CODE()</a> macro).</li>
<li><a class="el" href="d4/d0f/newWeightUpdateModels_8h.html#a9f1ad825b90bcbaab3b0d18fc4d00016">SET_LEARN_POST_CODE(LEARN_POST_CODE)</a> defines the code which is used in the learnSynapsesPost kernel/function, which performs updates to synapses that are triggered by post-synaptic spikes. This is typically used in STDP-like models e.g. <a class="el" href="df/d86/classWeightUpdateModels_1_1PiecewiseSTDP.html" title="This is a simple STDP rule including a time delay for the finite transmission speed of the synapse...">WeightUpdateModels::PiecewiseSTDP</a>.</li>
<li><a class="el" href="d4/d0f/newWeightUpdateModels_8h.html#ae68b0e54b73f5cda5fe9bab3667de3a8">SET_SYNAPSE_DYNAMICS_CODE(SYNAPSE_DYNAMICS_CODE)</a> defines code that is run for each synapse, each timestep i.e. unlike the others it is not event driven. This can be used where synapses have internal variables and dynamics that are described in continuous time, e.g. by ODEs. However using this mechanism is typically computationally very costly because of the large number of synapses in a typical network. By using the $(addtoinsyn), $(updatelinsyn) and $(addToDenDelay) mechanisms discussed in the context of <a class="el" href="d0/dcb/newNeuronModels_8h.html#a8d014c818d8ee68f3a16838dcd4f030f">SET_SIM_CODE()</a>, the synapse dynamics can also be used to implement continuous synapses for rate-based models.</li>
<li><a class="el" href="d4/d0f/newWeightUpdateModels_8h.html#aede2f97f853841236f081c8d7b9d156f">SET_PRE_SPIKE_CODE()</a> and <a class="el" href="d4/d0f/newWeightUpdateModels_8h.html#aef99e5858038673e6b268f4af07864c2">SET_POST_SPIKE_CODE()</a> define code that is called whenever there is a pre or postsynaptic spike. Typically these code strings are used to update any pre or postsynaptic state variables.</li>
<li><a class="el" href="d4/d0f/newWeightUpdateModels_8h.html#ad06378df00a5d9ffe4068ba2c01b09ab">SET_NEEDS_PRE_SPIKE_TIME(PRE_SPIKE_TIME_REQUIRED)</a> and <a class="el" href="d4/d0f/newWeightUpdateModels_8h.html#a4f3e008922887cba8cfafc0fb0e53965">SET_NEEDS_POST_SPIKE_TIME(POST_SPIKE_TIME_REQUIRED)</a> define whether the weight update needs to know the times of the spikes emitted from the pre and postsynaptic populations. For example an STDP rule would be likely to require: <div class="fragment"><div class="line"><a class="code" href="d4/d0f/newWeightUpdateModels_8h.html#ad06378df00a5d9ffe4068ba2c01b09ab">SET_NEEDS_PRE_SPIKE_TIME</a>(<span class="keyword">true</span>);</div><div class="line"><a class="code" href="d4/d0f/newWeightUpdateModels_8h.html#a4f3e008922887cba8cfafc0fb0e53965">SET_NEEDS_POST_SPIKE_TIME</a>(<span class="keyword">true</span>);</div></div><!-- fragment --></li>
</ul>
<p>All code snippets, aside from those defined with <code><a class="el" href="d4/d0f/newWeightUpdateModels_8h.html#aede2f97f853841236f081c8d7b9d156f">SET_PRE_SPIKE_CODE()</a></code> and <code><a class="el" href="d4/d0f/newWeightUpdateModels_8h.html#aef99e5858038673e6b268f4af07864c2">SET_POST_SPIKE_CODE()</a></code>, can be used to manipulate any synapse variable and so learning rules can combine both time-drive and event-driven processes.</p>
<hr/>
<p> <a class="el" href="sectNeuronModels.html">Previous</a> | <a class="el" href="UserManual.html">Top</a> | <a class="el" href="sect_postsyn.html">Next</a> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="UserManual.html">User Manual</a></li>
    <li class="footer">Generated on Tue Nov 6 2018 10:53:41 for GeNN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
